# Архитектура проекта

## Описание

Моделирование работы ресторана «Сытная еда» с использованием потоков, мьютексов и условных переменных.

## Структура проекта

### Классы

1. **BurgerInventory** (`src/core/BurgerInventory.h/cpp`)
   - Управление инвентарем трех типов бургеров
   - Thread-safe операции с использованием `std::mutex`
   - Callback для уведомления менеджера при окончании запаса

2. **TableManager** (`src/core/TableManager.h/cpp`)
   - Управление 5 столиками
   - Использует `std::condition_variable` для ожидания свободных столиков
   - Thread-safe резервирование и освобождение столиков

3. **Manager** (`src/core/Manager.h/cpp`)
   - Отдельный поток для пополнения инвентаря
   - Ожидает запросы через `std::condition_variable`
   - Пополняет запас бургеров при вызове

4. **Customer** (`src/core/Customer.h/cpp`)
   - Поток-актор, представляющий покупателя
   - Покупает бургер, занимает столик, ест, освобождает столик
   - Вызывает менеджера при отсутствии нужного типа бургеров

5. **Restaurant** (`src/core/Restaurant.h/cpp`)
   - Координирует все компоненты
   - Управляет жизненным циклом потоков

## Средства синхронизации

### Мьютексы (`std::mutex`)
- `BurgerInventory::mutex_` - защита инвентаря
- `TableManager::mutex_` - защита счетчика столиков
- `Manager::mutex_` - защита состояния менеджера

### Условные переменные (`std::condition_variable`)
- `TableManager::tableAvailable_` - ожидание свободного столика
- `Manager::restockRequest_` - ожидание запроса на пополнение

## Потокобезопасность

Все операции с общими данными защищены мьютексами:
- Операции с инвентарем бургеров
- Резервирование/освобождение столиков
- Управление состоянием менеджера

Все счетчики и состояние защищены соответствующими мьютексами.

## Тестирование

Классы спроектированы для удобства тестирования:
- Разделение ответственности
- Возможность получения ссылок на компоненты через `Restaurant::getInventory()`, `getTableManager()`, `getManager()`
- Изолированные компоненты с четкими интерфейсами

## Компиляция и запуск

```bash
make compile    # Компиляция
make run        # Запуск
make clean      # Очистка
```

